{"remainingRequest":"D:\\Project\\NaEditor\\node_modules\\awesome-typescript-loader\\dist\\entry.js!D:\\Project\\NaEditor\\node_modules\\thread-loader\\dist\\cjs.js!D:\\Project\\NaEditor\\src\\reducers\\moduleReducer.ts","dependencies":[{"path":"D:\\Project\\NaEditor\\src\\reducers\\moduleReducer.ts","mtime":1535074092000},{"path":"D:\\Project\\NaEditor\\src\\reducers\\moduleReducer.ts","mtime":1535074092000},{"path":"D:\\Project\\NaEditor\\src\\actions\\index.js","mtime":1535090122000},{"path":"D:\\Project\\NaEditor\\src\\common\\script\\action.ts","mtime":1535074092000},{"path":"D:\\Project\\NaEditor\\node_modules\\axios\\index.d.ts","mtime":1519077740000},{"path":"D:\\Project\\NaEditor\\src\\common\\script\\INTERFACE.ts","mtime":1535074092000},{"path":"D:\\Project\\NaEditor\\src\\db\\dbConfig.js","mtime":1533698584000},{"path":"D:\\Project\\NaEditor\\node_modules\\idb\\lib\\idb.d.ts","mtime":1520276302000},{"path":"D:\\Project\\NaEditor\\node_modules\\localforage\\typings\\localforage.d.ts","mtime":1529170699000},{"path":"D:\\Project\\NaEditor\\src\\component\\interface.tsx","mtime":1533698584000},{"path":"D:\\Project\\NaEditor\\src\\component\\CarouselConfig\\interface.ts","mtime":1533698584000},{"path":"D:\\Project\\NaEditor\\src\\component\\ImageHotspotConfig\\interface.tsx","mtime":1533698584000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\version\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\upload\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\upload\\Dragger.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\upload\\interface.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\@types\\react\\index.d.ts","mtime":1532389452000},{"path":"D:\\Project\\NaEditor\\node_modules\\@types\\react\\global.d.ts","mtime":1532389452000},{"path":"D:\\Project\\NaEditor\\node_modules\\csstype\\index.d.ts","mtime":1532213362000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\upload\\Upload.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\upload\\utils.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\mention\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tooltip\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tooltip\\placements.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\timeline\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\timeline\\TimelineItem.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\timeline\\Timeline.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\time-picker\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\moment\\moment.d.ts","mtime":1527836312000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tag\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tag\\CheckableTag.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tabs\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tree-select\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\select\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tree-select\\interface.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tree\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tree\\DirectoryTree.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tree\\Tree.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\transfer\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\transfer\\search.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\transfer\\operation.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\transfer\\list.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\table\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\table\\interface.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\pagination\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\pagination\\Pagination.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\checkbox\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\checkbox\\Group.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\checkbox\\Checkbox.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\radio\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\radio\\interface.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\radio\\radioButton.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\radio\\group.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\radio\\radio.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\table\\createStore.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\spin\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\table\\Table.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\table\\ColumnGroup.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\table\\Column.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\switch\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\steps\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\slider\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\row\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\grid\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\grid\\col.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\grid\\row.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\rate\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\progress\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\progress\\progress.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\popover\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\popconfirm\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\button\\button.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\button\\button-group.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\notification\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\modal\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\modal\\ActionButton.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\modal\\Modal.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\menu\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\layout\\Sider.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\menu\\MenuItem.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\menu\\SubMenu.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\message\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\locale-provider\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\modal\\locale.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\list\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\list\\Item.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\layout\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\layout\\layout.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\input-number\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\_util\\type.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\input\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\input\\TextArea.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\input\\Search.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\input\\Input.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\input\\Group.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\icon\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\form\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\form\\FormItem.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\form\\Form.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\drawer\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\dropdown\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\dropdown\\dropdown-button.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\dropdown\\dropdown.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\divider\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\date-picker\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\date-picker\\interface.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\col\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\cascader\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\carousel\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\collapse\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\collapse\\CollapsePanel.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\collapse\\Collapse.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\card\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\card\\Meta.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\card\\Grid.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\calendar\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\calendar\\Header.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\button\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\breadcrumb\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\breadcrumb\\BreadcrumbItem.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\breadcrumb\\Breadcrumb.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\badge\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\badge\\ScrollNumber.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\back-top\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\avatar\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\alert\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\auto-complete\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\anchor\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\anchor\\AnchorLink.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\anchor\\Anchor.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\affix\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\cache-loader\\dist\\cjs.js","mtime":0},{"path":"D:\\Project\\NaEditor\\node_modules\\awesome-typescript-loader\\dist\\entry.js","mtime":1529596564000},{"path":"D:\\Project\\NaEditor\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000}],"contextDependencies":[],"result":["import { ADD_MODULE, REFRESH_MODULE_LIST, REMOVE_MODULE, UPDATE_MODULE, FOCUS_MODULE, POSITION_MODULE, MODULE_TOP_CHANGE, MODULE_HEIGHT_CHANGE, } from \"../actions\";\r\nimport '../component/interface';\r\nexport default (state = { moduleList: [] }, action) => {\r\n    switch (action.type) {\r\n        case ADD_MODULE:\r\n            {\r\n                const { preModuleId, moduleData } = action;\r\n                let newModuleList;\r\n                if (preModuleId === undefined) {\r\n                    newModuleList = [moduleData].concat(state.moduleList);\r\n                }\r\n                else {\r\n                    const init = [];\r\n                    newModuleList = state.moduleList.reduce((acc, v, i, array) => {\r\n                        acc.push(v);\r\n                        if (v.moduleId === preModuleId) {\r\n                            acc.push(moduleData);\r\n                        }\r\n                        return acc;\r\n                    }, init);\r\n                }\r\n                const result = Object.assign({}, state, { moduleList: newModuleList });\r\n                return result;\r\n            }\r\n        case REFRESH_MODULE_LIST: //刷新整页\r\n            {\r\n                const { moduleList } = action;\r\n                return {\r\n                    moduleList: moduleList.map((v) => {\r\n                        return Object.assign({}, v, {\r\n                            tempData: {\r\n                                isActive: false,\r\n                                top: 0,\r\n                                height: 0,\r\n                            }\r\n                        });\r\n                    }),\r\n                };\r\n            }\r\n        case REMOVE_MODULE: // 删除模块\r\n            {\r\n                const { moduleId } = action;\r\n                let result;\r\n                if (state.moduleList) {\r\n                    return Object.assign({}, state, {\r\n                        moduleList: state.moduleList.filter(v => v.moduleId !== moduleId)\r\n                    });\r\n                }\r\n                else {\r\n                    return state;\r\n                }\r\n            }\r\n            break;\r\n        case UPDATE_MODULE: //更新模块\r\n            const { moduleData } = action;\r\n            if (moduleData) {\r\n                const { moduleId } = moduleData;\r\n                const result = Object.assign({}, state, {\r\n                    moduleList: state.moduleList.map((v) => {\r\n                        if (v.moduleId === moduleId) {\r\n                            moduleData.tempData = v.tempData; //带上临时数据\r\n                            return moduleData;\r\n                        }\r\n                        else {\r\n                            return v;\r\n                        }\r\n                    })\r\n                });\r\n                return result;\r\n            }\r\n        case FOCUS_MODULE: //聚焦模块\r\n            {\r\n                const { moduleId } = action;\r\n                const result = Object.assign({}, state, {\r\n                    moduleList: state.moduleList.map(v => {\r\n                        v.moduleId === moduleId ?\r\n                            v.tempData = Object.assign({}, v.tempData, { isActive: true }) :\r\n                            v.tempData = Object.assign({}, v.tempData, { isActive: false });\r\n                        return v;\r\n                    })\r\n                });\r\n                return result;\r\n            }\r\n        case POSITION_MODULE: //移动模块\r\n            {\r\n                const { moduleId, preModuleId } = action;\r\n                let { newModuleList, module } = state.moduleList.reduce((acc, v) => {\r\n                    if (v.moduleId === moduleId) {\r\n                        acc.module = v;\r\n                    }\r\n                    else {\r\n                        acc.newModuleList.push(v);\r\n                    }\r\n                    return acc;\r\n                }, ({\r\n                    newModuleList: [],\r\n                    module: undefined,\r\n                }));\r\n                // 如果移到第一个位置\r\n                if (preModuleId === undefined) {\r\n                    newModuleList = [module].concat(newModuleList);\r\n                }\r\n                else {\r\n                    const preModuleIndex = newModuleList.findIndex((v) => v.moduleId === preModuleId);\r\n                    newModuleList.splice(preModuleIndex + 1, 0, module);\r\n                }\r\n                const result = Object.assign({}, state, {\r\n                    moduleList: newModuleList,\r\n                });\r\n                return result;\r\n            }\r\n        case MODULE_TOP_CHANGE: // 模块top值变化\r\n            {\r\n                const { moduleId, top } = action;\r\n                const newModuleList = state.moduleList.map(v => {\r\n                    if (v.moduleId === moduleId) {\r\n                        v.tempData = Object.assign({}, v.tempData, { top });\r\n                    }\r\n                    return v;\r\n                });\r\n                const result = Object.assign({}, state, {\r\n                    moduleList: newModuleList,\r\n                });\r\n                return result;\r\n            }\r\n        case MODULE_HEIGHT_CHANGE: // 模块height值变化\r\n            {\r\n                const { moduleId, height } = action;\r\n                const newModuleList = state.moduleList.map(v => {\r\n                    if (v.moduleId === moduleId) {\r\n                        v.tempData = Object.assign({}, v.tempData, { height });\r\n                    }\r\n                    return v;\r\n                });\r\n                const result = Object.assign({}, state, {\r\n                    moduleList: newModuleList,\r\n                });\r\n                return result;\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n",{"version":3,"file":"D:/Project/NaEditor/src/reducers/moduleReducer.ts","sourceRoot":"D:/Project/NaEditor/","sources":["node_modules\\thread-loader\\dist\\cjs.js!D:\\Project\\NaEditor\\src\\reducers\\moduleReducer.ts"],"names":[],"mappings":"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","sourcesContent":["import { IState, IModule, IModuleData } from '../component/interface';\nimport {\n    ADD_MODULE,\n    REFRESH_MODULE,\n    REFRESH_MODULE_LIST,\n    REMOVE_MODULE,\n    UPDATE_MODULE,\n    FOCUS_MODULE,\n    POSITION_MODULE,\n    MODULE_TOP_CHANGE,\n    MODULE_HEIGHT_CHANGE,\n} from \"../actions\";\n\nimport '../component/interface';\n\nexport default (state: IModule = { moduleList: [] }, action: any) => {\n    switch (action.type) {\n        case ADD_MODULE:\n            {\n                const { preModuleId, moduleData } = action;\n                let newModuleList;\n                if (preModuleId === undefined) {\n                    newModuleList = [moduleData].concat(state.moduleList);\n                } else {\n                    const init: IModuleData[] = [];\n                    newModuleList = state.moduleList.reduce((acc, v: IModuleData, i, array) => {\n                        acc.push(v);\n                        if (v.moduleId === preModuleId) {\n                            acc.push(moduleData);\n                        }\n                        return acc;\n                    }, init);\n                }\n                const result = Object.assign({}, state, { moduleList: newModuleList })\n                return result;\n            }\n        case REFRESH_MODULE_LIST: //刷新整页\n            {\n                const { moduleList } = action;\n                return {\n                    moduleList: moduleList.map((v: IModuleData) => {\n                        return Object.assign({}, v, {\n                            tempData: {\n                                isActive: false,\n                                top: 0,\n                                height: 0,\n                            }\n                        });\n                    }),\n                };\n            }\n\n        case REMOVE_MODULE: // 删除模块\n            {\n                const { moduleId } = action;\n                let result;\n                if (state.moduleList) {\n                    return Object.assign({}, state, {\n                        moduleList: state.moduleList.filter(v => v.moduleId !== moduleId)\n                    });\n                } else {\n                    return state;\n                }\n            }\n            break;\n        case UPDATE_MODULE: //更新模块\n            const { moduleData } = action;\n            if (moduleData) {\n                const { moduleId } = moduleData;\n                const result = Object.assign({}, state, {\n                    moduleList: state.moduleList.map((v) => {\n                        if (v.moduleId === moduleId) {\n                            moduleData.tempData = v.tempData; //带上临时数据\n                            return moduleData;\n                        } else {\n                            return v;\n                        }\n                    })\n                });\n                return result;\n            }\n        case FOCUS_MODULE: //聚焦模块\n            {\n                const { moduleId } = action;\n                const result = Object.assign({}, state, {\n                    moduleList: state.moduleList.map(v => {\n                        v.moduleId === moduleId ?\n                            v.tempData = Object.assign({}, v.tempData, { isActive: true }) :\n                            v.tempData = Object.assign({}, v.tempData, { isActive: false })\n                        return v;\n                    })\n                })\n                return result;\n            }\n        case POSITION_MODULE: //移动模块\n            {\n                const { moduleId, preModuleId } = action;\n                let { newModuleList, module } = state.moduleList.reduce((acc, v) => {\n                    if (v.moduleId === moduleId) {\n                        acc.module = v;\n                    } else {\n                        acc.newModuleList.push(v);\n                    }\n                    return acc;\n                }, ({\n                    newModuleList: [],\n                    module: undefined,\n                }) as any);\n                // 如果移到第一个位置\n                if (preModuleId === undefined) {\n                    newModuleList = [module].concat(newModuleList);\n                } else {\n                    const preModuleIndex = newModuleList.findIndex((v: IModuleData) => v.moduleId === preModuleId);\n                    newModuleList.splice(preModuleIndex + 1, 0, module);\n                }\n                const result = Object.assign({}, state, {\n                    moduleList: newModuleList,\n                })\n                return result;\n            }\n        case MODULE_TOP_CHANGE: // 模块top值变化\n            {\n                const { moduleId, top } = action;\n                const newModuleList = state.moduleList.map(v => {\n                    if (v.moduleId === moduleId) {\n                        v.tempData = Object.assign({}, v.tempData, { top });\n                    }\n                    return v;\n                })\n                const result = Object.assign({}, state, {\n                    moduleList: newModuleList,\n                })\n                return result;\n            }\n        case MODULE_HEIGHT_CHANGE: // 模块height值变化\n            {\n                const { moduleId, height } = action;\n                const newModuleList = state.moduleList.map(v => {\n                    if (v.moduleId === moduleId) {\n                        v.tempData = Object.assign({}, v.tempData, { height });\n                    }\n                    return v;\n                })\n                const result = Object.assign({}, state, {\n                    moduleList: newModuleList,\n                })\n                return result;\n            }\n        default:\n            return state;\n    }\n}"]}]}