{"remainingRequest":"D:\\Project\\NaEditor\\node_modules\\awesome-typescript-loader\\dist\\entry.js!D:\\Project\\NaEditor\\node_modules\\thread-loader\\dist\\cjs.js!D:\\Project\\NaEditor\\src\\component\\ModuleBar\\ModuleBar.tsx","dependencies":[{"path":"D:\\Project\\NaEditor\\src\\component\\ModuleBar\\ModuleBar.tsx","mtime":1535224721661},{"path":"D:\\Project\\NaEditor\\src\\component\\ModuleBar\\ModuleBar.tsx","mtime":1535224721661},{"path":"D:\\Project\\NaEditor\\src\\component\\interface.tsx","mtime":1535210015291},{"path":"D:\\Project\\NaEditor\\src\\component\\CarouselConfig\\interface.ts","mtime":1533698584000},{"path":"D:\\Project\\NaEditor\\src\\component\\ImageHotspotConfig\\interface.tsx","mtime":1533698584000},{"path":"D:\\Project\\NaEditor\\src\\actions\\index.js","mtime":1535277057061},{"path":"D:\\Project\\NaEditor\\src\\common\\script\\action.ts","mtime":1535214522899},{"path":"D:\\Project\\NaEditor\\node_modules\\axios\\index.d.ts","mtime":1519077740000},{"path":"D:\\Project\\NaEditor\\src\\common\\script\\INTERFACE.ts","mtime":1535297432808},{"path":"D:\\Project\\NaEditor\\src\\db\\dbConfig.js","mtime":1533698584000},{"path":"D:\\Project\\NaEditor\\node_modules\\idb\\lib\\idb.d.ts","mtime":1520276302000},{"path":"D:\\Project\\NaEditor\\node_modules\\localforage\\typings\\localforage.d.ts","mtime":1529170699000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\version\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\upload\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\upload\\Dragger.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\upload\\interface.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\@types\\react\\index.d.ts","mtime":1532389452000},{"path":"D:\\Project\\NaEditor\\node_modules\\@types\\react\\global.d.ts","mtime":1532389452000},{"path":"D:\\Project\\NaEditor\\node_modules\\csstype\\index.d.ts","mtime":1532213362000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\upload\\Upload.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\upload\\utils.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\mention\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tooltip\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tooltip\\placements.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\timeline\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\timeline\\TimelineItem.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\timeline\\Timeline.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\time-picker\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\moment\\moment.d.ts","mtime":1527836312000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tag\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tag\\CheckableTag.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tabs\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tree-select\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\select\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tree-select\\interface.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tree\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tree\\DirectoryTree.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tree\\Tree.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\transfer\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\transfer\\search.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\transfer\\operation.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\transfer\\list.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\table\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\table\\interface.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\pagination\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\pagination\\Pagination.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\checkbox\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\checkbox\\Group.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\checkbox\\Checkbox.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\radio\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\radio\\interface.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\radio\\radioButton.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\radio\\group.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\radio\\radio.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\table\\createStore.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\spin\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\table\\Table.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\table\\ColumnGroup.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\table\\Column.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\switch\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\steps\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\slider\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\row\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\grid\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\grid\\col.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\grid\\row.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\rate\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\progress\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\progress\\progress.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\popover\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\popconfirm\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\button\\button.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\button\\button-group.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\notification\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\modal\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\modal\\ActionButton.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\modal\\Modal.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\menu\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\layout\\Sider.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\menu\\MenuItem.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\menu\\SubMenu.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\message\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\locale-provider\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\modal\\locale.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\list\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\list\\Item.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\layout\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\layout\\layout.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\input-number\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\_util\\type.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\input\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\input\\TextArea.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\input\\Search.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\input\\Input.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\input\\Group.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\icon\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\form\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\form\\FormItem.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\form\\Form.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\drawer\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\dropdown\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\dropdown\\dropdown-button.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\dropdown\\dropdown.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\divider\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\date-picker\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\date-picker\\interface.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\col\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\cascader\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\carousel\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\collapse\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\collapse\\CollapsePanel.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\collapse\\Collapse.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\card\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\card\\Meta.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\card\\Grid.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\calendar\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\calendar\\Header.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\button\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\breadcrumb\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\breadcrumb\\BreadcrumbItem.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\breadcrumb\\Breadcrumb.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\badge\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\badge\\ScrollNumber.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\back-top\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\avatar\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\alert\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\auto-complete\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\anchor\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\anchor\\AnchorLink.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\anchor\\Anchor.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\affix\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\@types\\prop-types\\index.d.ts","mtime":1533863514000},{"path":"D:\\Project\\NaEditor\\node_modules\\@types\\react-redux\\index.d.ts","mtime":1532389452000},{"path":"D:\\Project\\NaEditor\\node_modules\\@types\\react-redux\\node_modules\\redux\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\cache-loader\\dist\\cjs.js","mtime":0},{"path":"D:\\Project\\NaEditor\\node_modules\\awesome-typescript-loader\\dist\\entry.js","mtime":1529596564000},{"path":"D:\\Project\\NaEditor\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000}],"contextDependencies":[],"result":["import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { Icon, Tooltip, message } from 'antd';\r\nimport { showConfig, hideConfig, removeModuleRequest, positionModuleRequest } from '../../actions';\r\nclass ModuleBar extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        /**\r\n         * 上移模块\r\n         */\r\n        this.up = (moduleId) => {\r\n            const { pageId } = this.context.BASE_DATA;\r\n            const preModuleId = this.props.module.moduleList.reduce((acc, v, i, array) => {\r\n                if (v.moduleId === moduleId) {\r\n                    // 如果这不是第一个模块\r\n                    if (i > 1) {\r\n                        acc = array[i - 2].moduleId;\r\n                    }\r\n                    if (i === 0) {\r\n                        acc = -1;\r\n                    }\r\n                }\r\n                return acc;\r\n            }, 0);\r\n            if (preModuleId === -1) {\r\n                message.error('当前模块已是第一个模块');\r\n            }\r\n            else {\r\n                this.props.positionModuleRequest({\r\n                    preModuleId,\r\n                    moduleId,\r\n                    pageId,\r\n                });\r\n            }\r\n        };\r\n        /**\r\n         * 下移模块\r\n         */\r\n        this.down = (moduleId) => {\r\n            const { pageId } = this.context.BASE_DATA;\r\n            const preModuleId = this.props.module.moduleList.reduce((acc, v, i, array) => {\r\n                if (v.moduleId === moduleId) {\r\n                    let nextModule = array[i + 1];\r\n                    if (nextModule !== undefined) {\r\n                        acc = nextModule.moduleId;\r\n                    }\r\n                }\r\n                return acc;\r\n            }, 0);\r\n            if (preModuleId === undefined) {\r\n                message.error('当前模块已是最后一个模块');\r\n            }\r\n            else {\r\n                this.props.positionModuleRequest({\r\n                    preModuleId,\r\n                    moduleId,\r\n                    pageId,\r\n                });\r\n            }\r\n        };\r\n    }\r\n    render() {\r\n        const { pageId } = this.context.BASE_DATA;\r\n        const { showConfig, module, moduleConfig, hideConfig, removeModuleRequest } = this.props;\r\n        const activeModule = module.moduleList.filter((v) => v.tempData && v.tempData.isActive === true);\r\n        const configVisiable = moduleConfig.isVisible;\r\n        const activeModuleData = activeModule && activeModule[0];\r\n        const activeModuleId = activeModuleData && activeModuleData.moduleId;\r\n        let top = 90;\r\n        if (activeModuleData && activeModuleData.tempData) {\r\n            top += activeModuleData.tempData.top || 0;\r\n        }\r\n        if (activeModuleData === undefined) {\r\n            return null;\r\n        }\r\n        const removeModule = (moduleId) => {\r\n            removeModuleRequest({\r\n                pageId,\r\n                moduleId: activeModuleId,\r\n            });\r\n        };\r\n        return (React.createElement(\"div\", { className: \"d-module-bar\", style: { top } },\r\n            React.createElement(Tooltip, { title: \"\\u6A21\\u5757\\u914D\\u7F6E\", placement: \"right\" },\r\n                React.createElement(Icon, { type: \"setting\", onClick: () => { configVisiable ? hideConfig() : showConfig(activeModuleData); }, style: { fontSize: '20px', color: `${configVisiable ? '#3089DC' : ''}` } })),\r\n            React.createElement(Tooltip, { title: \"\\u4E0A\\u79FB\", placement: \"right\" },\r\n                React.createElement(Icon, { type: \"caret-up\", onClick: this.up.bind(this, activeModuleId), style: { fontSize: '20px' } })),\r\n            React.createElement(Tooltip, { title: \"\\u4E0B\\u79FB\", placement: \"right\" },\r\n                React.createElement(Icon, { type: \"caret-down\", style: { fontSize: '20px' }, onClick: this.down.bind(this, activeModuleId) })),\r\n            React.createElement(Tooltip, { title: \"\\u5220\\u9664\", placement: \"right\" },\r\n                React.createElement(Icon, { type: \"delete\", style: { fontSize: '20px' }, onClick: () => { removeModule(activeModuleId); } }))));\r\n    }\r\n}\r\nModuleBar.contextTypes = {\r\n    BASE_DATA: PropTypes.object\r\n};\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        module: state.module,\r\n        moduleConfig: state.moduleConfig,\r\n    };\r\n};\r\nexport default connect(mapStateToProps, {\r\n    showConfig,\r\n    hideConfig,\r\n    removeModuleRequest,\r\n    positionModuleRequest,\r\n})(ModuleBar);\r\n",{"version":3,"file":"D:/Project/NaEditor/src/component/ModuleBar/ModuleBar.tsx","sourceRoot":"D:/Project/NaEditor/","sources":["node_modules\\thread-loader\\dist\\cjs.js!D:\\Project\\NaEditor\\src\\component\\ModuleBar\\ModuleBar.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { Icon, Tooltip, message } from 'antd';\n\nimport { showConfig, hideConfig, removeModuleRequest, positionModuleRequest } from '../../actions';\nimport { IModule, IState, IModuleConfig } from '../interface';\n\ninterface ModuleBarProps {\n    module: IModule;\n    positionModuleRequest: (args: any) => void;\n    showConfig: any;\n    moduleConfig: IModuleConfig;\n    hideConfig: any;\n    removeModuleRequest: any;\n}\n\ninterface ModuleBarState {\n\n}\n\nclass ModuleBar extends React.Component<ModuleBarProps, ModuleBarState> {\n\n    static contextTypes = {\n        BASE_DATA: PropTypes.object\n    }\n\n    constructor(props: ModuleBarProps) {\n        super(props);\n    }\n\n    /**\n     * 上移模块\n     */\n    up = (moduleId: number) => {\n        const { pageId } = this.context.BASE_DATA;\n        const preModuleId = this.props.module.moduleList.reduce((acc, v, i, array) => {\n            if (v.moduleId === moduleId) {\n                // 如果这不是第一个模块\n                if (i > 1) {\n                    acc = array[i - 2].moduleId;\n                }\n                if (i === 0) {\n                    acc = -1;\n                }\n            }\n            return acc;\n        }, 0);\n        if (preModuleId === -1) {\n            message.error('当前模块已是第一个模块');\n        } else {\n            this.props.positionModuleRequest({\n                preModuleId,\n                moduleId,\n                pageId,\n            });\n        }\n    }\n\n    /**\n     * 下移模块\n     */\n    down = (moduleId: number) => {\n        const { pageId } = this.context.BASE_DATA;\n        const preModuleId = this.props.module.moduleList.reduce((acc, v, i, array) => {\n            if (v.moduleId === moduleId) {\n                let nextModule = array[i + 1];\n                if (nextModule !== undefined) {\n                    acc = nextModule.moduleId;\n                }\n            }\n            return acc;\n        }, 0);\n        if (preModuleId === undefined) {\n            message.error('当前模块已是最后一个模块');\n        } else {\n            this.props.positionModuleRequest({\n                preModuleId,\n                moduleId,\n                pageId,\n            });\n        }\n\n    }\n\n    render() {\n        const { pageId } = this.context.BASE_DATA;\n        const { showConfig, module, moduleConfig, hideConfig, removeModuleRequest } = this.props;\n        const activeModule = module.moduleList.filter((v) => v.tempData && v.tempData.isActive === true);\n        const configVisiable = moduleConfig.isVisible;\n        const activeModuleData = activeModule && activeModule[0];\n        const activeModuleId = activeModuleData && activeModuleData.moduleId;\n        let top = 90;\n        if (activeModuleData && activeModuleData.tempData) {\n            top += activeModuleData.tempData.top || 0;\n        }\n        if (activeModuleData === undefined) { return null; }\n\n        const removeModule = (moduleId: number) => {\n            removeModuleRequest({\n                pageId,\n                moduleId: activeModuleId,\n            });\n        };\n\n        return (\n            <div\n                className=\"d-module-bar\"\n                style={{ top }}\n            >\n                <Tooltip title=\"模块配置\" placement=\"right\">\n                    <Icon\n                        type=\"setting\"\n                        onClick={() => { configVisiable ? hideConfig() : showConfig(activeModuleData); }}\n                        style={{ fontSize: '20px', color: `${configVisiable ? '#3089DC' : ''}` }}\n                    />\n                </Tooltip>\n                <Tooltip title=\"上移\" placement=\"right\">\n                    <Icon\n                        type=\"caret-up\"\n                        onClick={this.up.bind(this, activeModuleId)}\n                        style={{ fontSize: '20px' }}\n                    />\n                </Tooltip>\n                <Tooltip title=\"下移\" placement=\"right\">\n                    <Icon\n                        type=\"caret-down\"\n                        style={{ fontSize: '20px' }}\n                        onClick={this.down.bind(this, activeModuleId)}\n                    />\n                </Tooltip>\n                <Tooltip title=\"删除\" placement=\"right\">\n                    <Icon\n                        type=\"delete\"\n                        style={{ fontSize: '20px' }}\n                        onClick={() => { removeModule(activeModuleId); }}\n                    />\n                </Tooltip>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state: IState) => {\n    return {\n        module: state.module,\n        moduleConfig: state.moduleConfig,\n    };\n};\n\nexport default connect(mapStateToProps, {\n    showConfig,\n    hideConfig,\n    removeModuleRequest,\n    positionModuleRequest,\n})(ModuleBar);"]}]}