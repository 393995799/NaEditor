{"remainingRequest":"D:\\Project\\NaEditor\\node_modules\\awesome-typescript-loader\\dist\\entry.js!D:\\Project\\NaEditor\\node_modules\\thread-loader\\dist\\cjs.js!D:\\Project\\NaEditor\\src\\component\\PicLib\\PicLibModal.tsx","dependencies":[{"path":"D:\\Project\\NaEditor\\src\\component\\PicLib\\PicLibModal.tsx","mtime":1535074092000},{"path":"D:\\Project\\NaEditor\\src\\component\\PicLib\\PicLibModal.tsx","mtime":1535074092000},{"path":"D:\\Project\\NaEditor\\node_modules\\axios\\index.d.ts","mtime":1519077740000},{"path":"D:\\Project\\NaEditor\\src\\common\\script\\INTERFACE.ts","mtime":1535204665672},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\version\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\upload\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\upload\\Dragger.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\upload\\interface.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\@types\\react\\index.d.ts","mtime":1532389452000},{"path":"D:\\Project\\NaEditor\\node_modules\\@types\\react\\global.d.ts","mtime":1532389452000},{"path":"D:\\Project\\NaEditor\\node_modules\\csstype\\index.d.ts","mtime":1532213362000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\upload\\Upload.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\upload\\utils.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\mention\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tooltip\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tooltip\\placements.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\timeline\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\timeline\\TimelineItem.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\timeline\\Timeline.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\time-picker\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\moment\\moment.d.ts","mtime":1527836312000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tag\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tag\\CheckableTag.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tabs\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tree-select\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\select\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tree-select\\interface.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tree\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tree\\DirectoryTree.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tree\\Tree.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\transfer\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\transfer\\search.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\transfer\\operation.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\transfer\\list.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\table\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\table\\interface.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\pagination\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\pagination\\Pagination.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\checkbox\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\checkbox\\Group.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\checkbox\\Checkbox.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\radio\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\radio\\interface.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\radio\\radioButton.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\radio\\group.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\radio\\radio.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\table\\createStore.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\spin\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\table\\Table.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\table\\ColumnGroup.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\table\\Column.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\switch\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\steps\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\slider\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\row\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\grid\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\grid\\col.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\grid\\row.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\rate\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\progress\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\progress\\progress.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\popover\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\popconfirm\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\button\\button.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\button\\button-group.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\notification\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\modal\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\modal\\ActionButton.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\modal\\Modal.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\menu\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\layout\\Sider.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\menu\\MenuItem.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\menu\\SubMenu.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\message\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\locale-provider\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\modal\\locale.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\list\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\list\\Item.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\layout\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\layout\\layout.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\input-number\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\_util\\type.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\input\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\input\\TextArea.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\input\\Search.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\input\\Input.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\input\\Group.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\icon\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\form\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\form\\FormItem.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\form\\Form.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\drawer\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\dropdown\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\dropdown\\dropdown-button.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\dropdown\\dropdown.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\divider\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\date-picker\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\date-picker\\interface.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\col\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\cascader\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\carousel\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\collapse\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\collapse\\CollapsePanel.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\collapse\\Collapse.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\card\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\card\\Meta.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\card\\Grid.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\calendar\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\calendar\\Header.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\button\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\breadcrumb\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\breadcrumb\\BreadcrumbItem.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\breadcrumb\\Breadcrumb.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\badge\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\badge\\ScrollNumber.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\back-top\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\avatar\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\alert\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\auto-complete\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\anchor\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\anchor\\AnchorLink.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\anchor\\Anchor.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\affix\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\cache-loader\\dist\\cjs.js","mtime":0},{"path":"D:\\Project\\NaEditor\\node_modules\\awesome-typescript-loader\\dist\\entry.js","mtime":1529596564000},{"path":"D:\\Project\\NaEditor\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000}],"contextDependencies":[],"result":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport * as React from 'react';\r\nimport { Fragment } from 'react';\r\nimport { Row, Col, Button, Upload, Input, Modal } from 'antd';\r\nconst Search = Input.Search;\r\nimport INTERFACE from '../../common/script/INTERFACE';\r\nimport axios from 'axios';\r\nconst uploadProps = {\r\n    name: 'file',\r\n    action: INTERFACE.uploadImage,\r\n    headers: {\r\n        authorization: 'authorization-text',\r\n    },\r\n    showUploadList: false,\r\n};\r\nclass PicLibModal extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.refreshImageList = () => __awaiter(this, void 0, void 0, function* () {\r\n            const { defaultValue } = this.props;\r\n            const result = (yield axios(INTERFACE.getImageList)).data;\r\n            if (result.success === true) {\r\n                const imgList = result.data.map((v) => {\r\n                    const { name, url, } = v;\r\n                    let isActive = false;\r\n                    if (url === defaultValue) {\r\n                        isActive = true;\r\n                    }\r\n                    return { name, url, isActive };\r\n                });\r\n                this.setState({\r\n                    imgList,\r\n                });\r\n            }\r\n        });\r\n        this.renderTitle = () => (React.createElement(Fragment, null,\r\n            React.createElement(\"span\", { className: \"d-title\" }, \"\\u56FE\\u7247\\u9009\\u62E9\\u5668\"),\r\n            React.createElement(\"span\", { className: \"d-desc\" }, \"(\\u652F\\u6301\\u683C\\u5F0F\\u4E3Axxx)\")));\r\n        this.handleOk = () => {\r\n            const activeList = this.state.imgList.filter((v) => {\r\n                return v.isActive;\r\n            });\r\n            let result = '';\r\n            if (activeList && activeList[0]) {\r\n                result = activeList[0].url;\r\n            }\r\n            this.props.onOk(result);\r\n        };\r\n        this.handleCancel = () => {\r\n            this.props.onCancel();\r\n        };\r\n        this.selectImg = (url) => {\r\n            const imgList = this.state.imgList.map((v) => {\r\n                if (v.url === url) {\r\n                    v.isActive = true;\r\n                }\r\n                else {\r\n                    v.isActive = false;\r\n                }\r\n                return v;\r\n            });\r\n            this.setState({\r\n                imgList,\r\n            });\r\n        };\r\n        this.renderImgList = () => {\r\n            const { imgList } = this.state;\r\n            return imgList.map((v, i) => (React.createElement(Col, { span: 3, key: i },\r\n                React.createElement(\"div\", { className: `d-img-container ${v.isActive ? 'active' : ''}`, onDoubleClick: this.handleOk, onClick: () => { this.selectImg(v.url); } },\r\n                    React.createElement(\"div\", { className: \"d-image\", style: { backgroundImage: `url(${v.url})` } }),\r\n                    React.createElement(\"p\", { className: \"d-image-name\", title: v.name }, v.name),\r\n                    React.createElement(\"div\", { className: \"d-img-mask\" })))));\r\n        };\r\n        this.uploadChange = (e) => {\r\n            if (e.event) {\r\n                this.refreshImageList();\r\n            }\r\n        };\r\n        this.state = {\r\n            imgList: [],\r\n        };\r\n    }\r\n    componentDidMount() {\r\n        this.refreshImageList();\r\n    }\r\n    render() {\r\n        const { isModalVisible: visible } = this.props;\r\n        return (React.createElement(Modal, { className: \"d-pic-lib-modal\", visible: visible, title: this.renderTitle(), width: 1100, onOk: this.handleOk, onCancel: this.handleCancel },\r\n            React.createElement(\"div\", { className: \"d-content\" },\r\n                React.createElement(Row, null,\r\n                    React.createElement(Col, { span: 4 },\r\n                        React.createElement(Search, { placeholder: \"\\u8F93\\u5165\\u56FE\\u7247\\u540D\\u79F0\\u6216\\u5173\\u952E\\u5B57\" })),\r\n                    React.createElement(Col, { span: 2, offset: 18 },\r\n                        React.createElement(Upload, Object.assign({}, uploadProps, { onChange: this.uploadChange }),\r\n                            React.createElement(Button, { className: \"d-upload-img\", type: \"primary\" }, \"\\u4E0A\\u4F20\\u56FE\\u7247\")))),\r\n                React.createElement(Row, { style: { marginTop: '10px' } }, this.renderImgList()))));\r\n    }\r\n}\r\nexport default PicLibModal;\r\n",{"version":3,"file":"D:/Project/NaEditor/src/component/PicLib/PicLibModal.tsx","sourceRoot":"D:/Project/NaEditor/","sources":["node_modules\\thread-loader\\dist\\cjs.js!D:\\Project\\NaEditor\\src\\component\\PicLib\\PicLibModal.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { Fragment } from 'react';\nimport { Row, Col, Button, Upload, Input, Modal } from 'antd';\nconst Search = Input.Search;\n\nimport INTERFACE from '../../common/script/INTERFACE';\nimport axios from 'axios';\n\nexport interface ContentProps {\n    defaultValue?: string;\n    onOk: (url: string) => void;\n    onCancel: () => void;\n    isModalVisible?: boolean;\n}\n\nconst uploadProps = {\n    name: 'file',\n    action: INTERFACE.uploadImage,\n    headers: {\n        authorization: 'authorization-text',\n    },\n    showUploadList: false,\n};\n\ninterface ImageInfo {\n    name: string;\n    url: string;\n    isActive: boolean;\n}\n\nclass PicLibModal extends React.Component<ContentProps, any> {\n\n    constructor(props: ContentProps) {\n        super(props);\n        this.state = {\n            imgList: [],\n        };\n    }\n\n    componentDidMount() {\n        this.refreshImageList();\n    }\n\n    refreshImageList = async () => {\n        const { defaultValue } = this.props;\n        const result = (await axios(INTERFACE.getImageList)).data;\n        if (result.success === true) {\n            const imgList = result.data.map((v: any) => {\n                const { name, url, } = v;\n                let isActive = false;\n                if (url === defaultValue) {\n                    isActive = true;\n                }\n                return { name, url, isActive };\n            });\n            this.setState({\n                imgList,\n            });\n        }\n    }\n\n    renderTitle = () => (\n        <Fragment>\n            <span className=\"d-title\">图片选择器</span>\n            <span className=\"d-desc\">(支持格式为xxx)</span>\n        </Fragment>\n    )\n\n    handleOk = () => {\n        const activeList = this.state.imgList.filter((v: ImageInfo) => {\n            return v.isActive;\n        });\n        let result = '';\n        if (activeList && activeList[0]) {\n            result = activeList[0].url;\n        }\n        this.props.onOk(result);\n    }\n\n    handleCancel = () => {\n        this.props.onCancel();\n    }\n\n    selectImg = (url: string) => {\n        const imgList = this.state.imgList.map((v: ImageInfo) => {\n            if (v.url === url) {\n                v.isActive = true;\n            } else {\n                v.isActive = false;\n            }\n            return v;\n        });\n        this.setState({\n            imgList,\n        });\n    }\n\n    renderImgList = () => {\n        const { imgList } = this.state;\n        return imgList.map((v: ImageInfo, i: number) => (\n            <Col span={3} key={i}>\n                <div\n                    className={`d-img-container ${v.isActive ? 'active' : ''}`}\n                    onDoubleClick={this.handleOk}\n                    onClick={() => { this.selectImg(v.url); }}\n                >\n                    <div\n                        className=\"d-image\"\n                        style={{ backgroundImage: `url(${v.url})` }}\n                    />\n                    <p className=\"d-image-name\" title={v.name}>{v.name}</p>\n                    <div className=\"d-img-mask\" />\n                </div>\n            </Col>\n        ));\n    }\n\n    uploadChange = (e: any) => {\n        if (e.event) {\n            this.refreshImageList();\n        }\n    }\n\n    render() {\n        const { isModalVisible: visible } = this.props;\n        return (\n            <Modal\n                className=\"d-pic-lib-modal\"\n                visible={visible}\n                title={this.renderTitle()}\n                width={1100}\n                onOk={this.handleOk}\n                onCancel={this.handleCancel}\n            >\n                <div className=\"d-content\">\n                    <Row>\n                        <Col span={4}>\n                            <Search\n                                placeholder=\"输入图片名称或关键字\"\n                            />\n                        </Col >\n                        <Col span={2} offset={18}>\n                            <Upload {...uploadProps} onChange={this.uploadChange}>\n                                <Button className=\"d-upload-img\" type=\"primary\">\n                                    上传图片\n                            </Button>\n                            </Upload>\n                        </Col >\n                    </Row>\n                    <Row style={{ marginTop: '10px' }}>\n                        {this.renderImgList()}\n                    </Row>\n                </div>\n            </Modal>\n        );\n    }\n}\n\nexport default PicLibModal;\n"]}]}