{"remainingRequest":"D:\\Project\\NaEditor\\node_modules\\awesome-typescript-loader\\dist\\entry.js!D:\\Project\\NaEditor\\node_modules\\thread-loader\\dist\\cjs.js!D:\\Project\\NaEditor\\src\\component\\ModuleNav\\ModuleNavItem.tsx","dependencies":[{"path":"D:\\Project\\NaEditor\\src\\component\\ModuleNav\\ModuleNavItem.tsx","mtime":1533698646000},{"path":"D:\\Project\\NaEditor\\src\\component\\ModuleNav\\ModuleNavItem.tsx","mtime":1533698646000},{"path":"D:\\Project\\NaEditor\\src\\component\\interface.tsx","mtime":1533698584000},{"path":"D:\\Project\\NaEditor\\src\\component\\CarouselConfig\\interface.ts","mtime":1533698584000},{"path":"D:\\Project\\NaEditor\\src\\component\\ImageHotspotConfig\\interface.tsx","mtime":1533698584000},{"path":"D:\\Project\\NaEditor\\src\\actions\\index.js","mtime":1535090122000},{"path":"D:\\Project\\NaEditor\\src\\common\\script\\action.ts","mtime":1535074092000},{"path":"D:\\Project\\NaEditor\\node_modules\\axios\\index.d.ts","mtime":1519077740000},{"path":"D:\\Project\\NaEditor\\src\\common\\script\\INTERFACE.ts","mtime":1535204665672},{"path":"D:\\Project\\NaEditor\\src\\db\\dbConfig.js","mtime":1533698584000},{"path":"D:\\Project\\NaEditor\\node_modules\\idb\\lib\\idb.d.ts","mtime":1520276302000},{"path":"D:\\Project\\NaEditor\\node_modules\\localforage\\typings\\localforage.d.ts","mtime":1529170699000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\version\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\upload\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\upload\\Dragger.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\upload\\interface.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\@types\\react\\index.d.ts","mtime":1532389452000},{"path":"D:\\Project\\NaEditor\\node_modules\\@types\\react\\global.d.ts","mtime":1532389452000},{"path":"D:\\Project\\NaEditor\\node_modules\\csstype\\index.d.ts","mtime":1532213362000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\upload\\Upload.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\upload\\utils.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\mention\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tooltip\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tooltip\\placements.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\timeline\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\timeline\\TimelineItem.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\timeline\\Timeline.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\time-picker\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\moment\\moment.d.ts","mtime":1527836312000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tag\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tag\\CheckableTag.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tabs\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tree-select\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\select\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tree-select\\interface.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tree\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tree\\DirectoryTree.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\tree\\Tree.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\transfer\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\transfer\\search.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\transfer\\operation.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\transfer\\list.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\table\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\table\\interface.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\pagination\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\pagination\\Pagination.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\checkbox\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\checkbox\\Group.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\checkbox\\Checkbox.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\radio\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\radio\\interface.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\radio\\radioButton.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\radio\\group.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\radio\\radio.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\table\\createStore.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\spin\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\table\\Table.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\table\\ColumnGroup.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\table\\Column.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\switch\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\steps\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\slider\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\row\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\grid\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\grid\\col.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\grid\\row.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\rate\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\progress\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\progress\\progress.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\popover\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\popconfirm\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\button\\button.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\button\\button-group.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\notification\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\modal\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\modal\\ActionButton.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\modal\\Modal.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\menu\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\layout\\Sider.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\menu\\MenuItem.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\menu\\SubMenu.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\message\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\locale-provider\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\modal\\locale.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\list\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\list\\Item.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\layout\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\layout\\layout.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\input-number\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\_util\\type.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\input\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\input\\TextArea.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\input\\Search.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\input\\Input.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\input\\Group.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\icon\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\form\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\form\\FormItem.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\form\\Form.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\drawer\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\dropdown\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\dropdown\\dropdown-button.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\dropdown\\dropdown.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\divider\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\date-picker\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\date-picker\\interface.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\col\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\cascader\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\carousel\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\collapse\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\collapse\\CollapsePanel.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\collapse\\Collapse.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\card\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\card\\Meta.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\card\\Grid.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\calendar\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\calendar\\Header.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\button\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\breadcrumb\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\breadcrumb\\BreadcrumbItem.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\breadcrumb\\Breadcrumb.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\badge\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\badge\\ScrollNumber.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\back-top\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\avatar\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\alert\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\auto-complete\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\anchor\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\anchor\\AnchorLink.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\anchor\\Anchor.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\antd\\lib\\affix\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\@types\\react-redux\\index.d.ts","mtime":1532389452000},{"path":"D:\\Project\\NaEditor\\node_modules\\@types\\react-redux\\node_modules\\redux\\index.d.ts","mtime":499162500000},{"path":"D:\\Project\\NaEditor\\node_modules\\cache-loader\\dist\\cjs.js","mtime":0},{"path":"D:\\Project\\NaEditor\\node_modules\\awesome-typescript-loader\\dist\\entry.js","mtime":1529596564000},{"path":"D:\\Project\\NaEditor\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000}],"contextDependencies":[],"result":["import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Icon } from 'antd';\r\nimport { showConfig, focusModule, removeModuleRequest, positionModuleRequest } from '../../actions';\r\nconst pageId = Number.parseInt(window.BASE_DATA.pageId, 10);\r\nclass ModuleNavItem extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.onDragStart = (e) => {\r\n            const { moduleData: { moduleId, }, onDragedChange, } = this.props;\r\n            this.setState({\r\n                isVisible: false,\r\n            });\r\n            onDragedChange(moduleId);\r\n            e.dataTransfer.setData('moduleId', moduleId);\r\n        };\r\n        this.onDragEnter = (e) => {\r\n            const { moduleData: { moduleId, } } = this.props;\r\n            const { currentDrag } = this.props;\r\n            if (moduleId !== currentDrag) {\r\n                this.setState({\r\n                    isDragOver: true,\r\n                });\r\n            }\r\n        };\r\n        this.onDragLeave = () => {\r\n            this.setState({\r\n                isDragOver: false,\r\n            });\r\n        };\r\n        this.onDrop = (e) => {\r\n            const targetModuleId = Number.parseInt(e.dataTransfer.getData('moduleId'), 10);\r\n            const { moduleData: { moduleId, }, currentDrag, positionModuleRequest, onDragedChange, } = this.props;\r\n            // 移动自己不生效\r\n            if (currentDrag === moduleId) {\r\n                return;\r\n            }\r\n            positionModuleRequest({\r\n                moduleId: targetModuleId,\r\n                preModuleId: moduleId,\r\n                pageId,\r\n            });\r\n            onDragedChange(undefined);\r\n        };\r\n        this.state = {\r\n            isDragOver: false,\r\n            isVisible: true,\r\n        };\r\n    }\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.currentDrag === undefined) {\r\n            this.setState({\r\n                isDragOver: false,\r\n            });\r\n        }\r\n    }\r\n    render() {\r\n        const { moduleData, moduleConfig: { isVisiable: isConfigVisiable, }, moduleData: { moduleName, moduleId, tempData: { isActive, }, }, showConfig, focusModule, removeModuleRequest, } = this.props;\r\n        const { isDragOver, isVisible } = this.state;\r\n        return (React.createElement(React.Fragment, null,\r\n            React.createElement(\"li\", { className: `d-module-nav-item ${isActive ? 'active' : ''}`, onClick: (e) => { focusModule(moduleId); if (isConfigVisiable) {\r\n                    showConfig(moduleData);\r\n                } }, onDragStart: (e) => { this.onDragStart(e); }, onDragEnter: (e) => { this.onDragEnter(e); }, onDragOver: (e) => { e.preventDefault(); }, onDrop: (e) => { this.onDrop(e); }, onDragLeave: this.onDragLeave, draggable: true },\r\n                React.createElement(\"span\", { className: \"d-module-name\" }, moduleName),\r\n                React.createElement(\"span\", { className: \"d-module-operate\" },\r\n                    React.createElement(Icon, { className: \"d-operate-icon\", type: \"setting\", onClick: (e) => { showConfig(moduleData); } }),\r\n                    React.createElement(Icon, { className: \"d-operate-icon\", type: \"delete\", onClick: (e) => { removeModuleRequest({ moduleId, pageId }); } }))),\r\n            isDragOver ? React.createElement(\"div\", { className: \"d-placeholder\" }) : null));\r\n    }\r\n}\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        module: state.module,\r\n        moduleConfig: state.moduleConfig,\r\n    };\r\n};\r\nexport default connect(mapStateToProps, {\r\n    showConfig,\r\n    focusModule,\r\n    removeModuleRequest,\r\n    positionModuleRequest,\r\n})(ModuleNavItem);\r\n",{"version":3,"file":"D:/Project/NaEditor/src/component/ModuleNav/ModuleNavItem.tsx","sourceRoot":"D:/Project/NaEditor/","sources":["node_modules\\thread-loader\\dist\\cjs.js!D:\\Project\\NaEditor\\src\\component\\ModuleNav\\ModuleNavItem.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport { Icon } from 'antd';\n\nimport { showConfig, focusModule, removeModuleRequest, positionModuleRequest } from '../../actions';\nimport { IState } from '../interface';\n\ninterface ModuleNavItemProps {\n    showConfig?: any;\n    moduleData?: any;\n    moduleConfig?: any;\n    currentDrag?: number;\n    focusModule: (moduleId: number) => void;\n    removeModuleRequest: (args: any) => void;\n    onDragedChange: (moduleId: number | undefined) => void;\n    positionModuleRequest: (args: any) => void;\n}\n\ninterface ModuleNavItemState {\n    isDragOver: boolean;\n    isVisible: boolean;\n}\n\nconst pageId = Number.parseInt((window as any).BASE_DATA.pageId, 10);\n\nclass ModuleNavItem extends React.Component<ModuleNavItemProps, ModuleNavItemState> {\n    constructor(props: ModuleNavItemProps) {\n        super(props);\n        this.state = {\n            isDragOver: false,\n            isVisible: true,\n        }\n    }\n\n    componentWillReceiveProps(nextProps: ModuleNavItemProps) {\n        if (nextProps.currentDrag === undefined) {\n            this.setState({\n                isDragOver: false,\n            });\n        }\n    }\n\n    onDragStart = (e: DragEvent) => {\n        const {\n            moduleData: {\n                moduleId,\n            },\n            onDragedChange,\n        } = this.props;\n        this.setState({\n            isVisible: false,\n        });\n        onDragedChange(moduleId);\n        e.dataTransfer.setData('moduleId', moduleId);\n    }\n\n    onDragEnter = (e: DragEvent) => {\n        const {\n            moduleData: {\n                moduleId,\n            }\n        } = this.props;\n        const { currentDrag } = this.props;\n\n        if (moduleId !== currentDrag) {\n            this.setState({\n                isDragOver: true,\n            });\n        }\n    }\n\n    onDragLeave = () => {\n        this.setState({\n            isDragOver: false,\n        });\n    }\n\n    onDrop = (e: React.DragEvent) => {\n        const targetModuleId: number = Number.parseInt(e.dataTransfer.getData('moduleId'), 10);\n        const {\n            moduleData: {\n                moduleId,\n            },\n            currentDrag,\n            positionModuleRequest,\n            onDragedChange,\n        } = this.props;\n        // 移动自己不生效\n        if (currentDrag === moduleId) { return; }\n        positionModuleRequest({\n            moduleId: targetModuleId,\n            preModuleId: moduleId,\n            pageId,\n        });\n        onDragedChange(undefined);\n    }\n\n    render() {\n\n        const {\n            moduleData,\n            moduleConfig: {\n                isVisiable: isConfigVisiable,\n            },\n            moduleData: {\n                moduleName,\n                moduleId,\n                tempData: {\n                    isActive,\n                },\n            },\n            showConfig,\n            focusModule,\n            removeModuleRequest,\n        } = this.props;\n\n        const { isDragOver, isVisible } = this.state;\n        return (\n            <React.Fragment>\n                <li\n                    className={`d-module-nav-item ${isActive ? 'active' : ''}`}\n                    onClick={(e) => { focusModule(moduleId); if (isConfigVisiable) { showConfig(moduleData); } }}\n                    onDragStart={(e: any) => { this.onDragStart(e); }}\n                    onDragEnter={(e: any) => { this.onDragEnter(e); }}\n                    onDragOver={(e: React.DragEvent) => { e.preventDefault(); }}\n                    onDrop={(e: any) => { this.onDrop(e); }}\n                    onDragLeave={this.onDragLeave}\n                    draggable={true}\n                >\n                    <span className=\"d-module-name\">{moduleName}</span>\n                    <span className=\"d-module-operate\">\n                        <Icon\n                            className=\"d-operate-icon\"\n                            type=\"setting\"\n                            onClick={(e) => { showConfig(moduleData); }}\n                        />\n                        <Icon\n                            className=\"d-operate-icon\"\n                            type=\"delete\"\n                            onClick={(e) => { removeModuleRequest({ moduleId, pageId }); }}\n                        />\n                    </span>\n                </li>\n                {isDragOver ? <div className=\"d-placeholder\" /> : null}\n            </React.Fragment>\n        );\n    }\n}\n\nconst mapStateToProps = (state: IState) => {\n    return {\n        module: state.module,\n        moduleConfig: state.moduleConfig,\n    };\n};\n\nexport default connect(mapStateToProps, {\n    showConfig,\n    focusModule,\n    removeModuleRequest,\n    positionModuleRequest,\n})(ModuleNavItem);"]}]}